apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
    name: sustainable-city-management
    annotations:
        kubernetes.io/ingress.class: nginx
        cert-manager.io/cluster-issuer: letsencrypt-prod
        nginx.ingress.kubernetes.io/rewrite-target: /
spec:
    tls:
    - hosts:
      - scm.rxshri99.live
      - prometheus-scm.rxshri99.live
      - grafana-scm.rxshri99.live
      secretName: scm-tls
    rules:
        - host: scm.rxshri99.live
          http:
            paths:
                - path: /
                  pathType: Prefix
                  backend:
                    service:
                        name: {{ .Values.gateway.Name }}-service
                        port:
                            name: http
        - host: prometheus-scm.rxshri99.live
          http:
            paths:
              - path: /
                pathType: Prefix
                backend:
                  service:
                      name: prometheus-operated
                      port:
                          name: http-web
        - host: grafana-scm.rxshri99.live
          http:
            paths:                  
            - path: /
              pathType: Prefix
              backend:
                service:
                    name: monitoring-grafana
                    port:
                        name: http-web
